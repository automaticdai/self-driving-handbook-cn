# 线控执行层：转向、制动、驱动与换挡

本页聚焦"执行器如何把控制指令变成车辆动作"，涵盖线控转向、线控制动、线控驱动的工作原理与工程实践。

---

## 1. 线控转向（EPS / SbW）

### 1.1 EPS（电动助力转向）基础闭环

EPS 根据驾驶员力矩、车速和方向盘角度计算助力：

$$T_{\text{assist}} = f(T_{\text{driver}}, v, \theta_{\text{sw}})$$

**EPS 工作原理：**

```
驾驶员转动方向盘
    │ 扭矩传感器（Torque Sensor）测量手力矩
    ↓
EPS ECU 计算目标助力电流
    │ 考虑：车速（高速减小助力）、方向盘角度、路感反馈
    ↓
电机驱动（PMSM 永磁同步电机）
    │ 通过蜗轮蜗杆/滚珠丝杠传递到转向柱
    ↓
车轮偏转（前桥转向）
    │ 转角传感器（Steering Angle Sensor, SAS）反馈
    └──→ 闭环控制
```

**ADAS 接管（自动转向）模式：**

在 L2+ 场景下，EPS 接收来自自动驾驶控制器的**目标转角**指令（`target_angle`）或**目标转矩**指令（`target_torque`），覆盖驾驶员输入：

```
自动驾驶控制器
    │ target_curvature → 计算 target_steering_angle
    ↓
EPS ADAS 接口（专用 CAN 通道）
    │ 安全检查（指令限幅、变化率限制）
    ↓
EPS 执行目标转角
    │ 同时监控驾驶员手力矩（Override 检测）
    └──→ 驾驶员主动施力 > 阈值：退出自动转向
```

### 1.2 SbW（线控转向）

SbW 断开方向盘与车轮的机械连接，实现完全解耦：

**架构优势：**

- 转向比可动态定义（低速时灵敏，高速时迟钝）
- 座舱布局更自由（无转向柱穿越前舱）
- 支持主动路感反馈（Steer-by-Wire Feedback Actuator）

**冗余要求：**

L3+ 的 SbW 系统需要满足 ASIL-D 要求，典型冗余方案：

```
双路转向执行电机（独立电源 + 独立 ECU）
    │
    ├─ 主路：主电机驱动
    └─ 备路：备电机热备（实时跟踪，可在 < 10 ms 内切换）

双路力矩传感器（用于路感反馈验证）
双路转角传感器（差分校验，防单点故障）
```

!!! warning "SbW 量产挑战"
    SbW 功能安全压力极大（无机械兜底），任何软件/硬件故障都不能导致失控转向。目前主流 L4 Robotaxi 已采用（如 Waymo），但乘用车量产仍在推进中（日产 Infiniti 等）。

---

## 2. 线控制动（EHB / EMB）

### 2.1 EHB（电子液压制动）

EHB 保留液压通道，但用电机代替真空助力器建压：

```
制动踏板传感器（双通道冗余）
    │ 驾驶员制动意图
    │ 或 AEB 系统制动请求
    ↓
EHB ECU 计算目标制动压力
    │ 制动力分配（前后轴、ABS/ESC 介入）
    ↓
高压泵 + 电磁阀（毫秒级建压）
    │ 目标压力：0 → 100 bar，建压时间 < 150 ms
    ↓
液压缸驱动制动卡钳
    ↑ 压力传感器反馈
```

**AEB 建压时序（关键指标）：**

| 环节 | 典型时间 |
| --- | --- |
| 感知识别危险目标 | 50–80 ms |
| AEB 系统决策与下发 | 10–30 ms |
| EHB 接收指令到开始建压 | 1–5 ms |
| 建压到目标压力（0→100 bar）| 50–150 ms |
| **全链路总时延** | **~130–265 ms** |

NCAP（新车评价规程）要求 AEB 在 60 km/h 以内能有效减速或完全刹停，全链路时延直接影响安全距离。

### 2.2 EMB（电子机械制动）

EMB 完全去除液压，由电机直接驱动卡钳：

| 维度 | EHB | EMB |
| --- | --- | --- |
| 液压系统 | 保留 | 完全去除 |
| 建压速度 | 50–150 ms | 20–80 ms（更快）|
| 控制精度 | 中等 | 高（轮端独立控制）|
| 热管理 | 液压散热 | 电机热量需专门处理 |
| 故障模式 | 液压泄漏 | 电机卡死 |
| 量产状态 | 主流（2020+）| 量产推进中（2025+）|

### 2.3 制动力分配与 ABS

**ABS（防抱死制动）原理：**

车轮滑移率 $\lambda$ 是制动控制的关键参数：

$$\lambda = \frac{v - r\omega}{v}$$

其中 $v$ 为车速，$r$ 为轮胎半径，$\omega$ 为车轮角速度。

最大制动力出现在 $\lambda \approx 0.2$（20% 滑移率），ABS 通过调节液压压力将滑移率控制在最优区间。

---

## 3. 线控驱动

### 3.1 燃油车：电子节气门（ETC）

```
油门踏板传感器（双通道冗余，防意外加速）
    │
    ↓ ECU 解析踏板意图
节气门开度控制（步进电机/DC 电机）
    │ 精确控制进气量
    ↓
发动机响应（扭矩建立时间：100–300 ms）
```

**防意外加速设计要求：**

- 踏板传感器必须双通道冗余，两路信号相差 > 阈值时切断驱动
- 制动优先策略：同时检测到制动踏板时，无条件切断驱动力

### 3.2 电动车：电机扭矩控制

电动车驱动响应比燃油车快得多，控制更精确：

**FOC（磁场定向控制）响应时间：**

- 扭矩阶跃响应：10–50 ms（远快于 ICE 的 100–300 ms）
- 这使得电动车的纵向控制更容易实现高舒适性

**扭矩矢量分配（Torque Vectoring）：**

四驱电动车可以对四个车轮独立控制扭矩，提升转弯稳定性：

$$T_{FL} + T_{FR} + T_{RL} + T_{RR} = T_{\text{target}}$$

$$T_{FL} - T_{FR} = \Delta T_{\text{yaw}} \cdot \text{front\_ratio}$$

### 3.3 再生制动与摩擦制动协调

**Blending 策略：**

```
目标制动减速度 a_target
    │
    ├─ a_target ≤ a_regen_max：
    │   完全使用再生制动（能量回收最大化）
    │
    ├─ a_regen_max < a_target ≤ a_max：
    │   再生制动 a_regen_max + 摩擦制动补充
    │
    └─ 低附着路面（ABS 触发）：
        优先摩擦制动，限制再生制动比例
        （避免再生制动扭矩变化干扰 ABS 控制）
```

---

## 4. 线控换挡与电子驻车

### 4.1 线控换挡（SbS，Shift by Wire）

传统换挡杆通过机械拉索与变速箱相连，SbS 完全电控化：

- 支持自动泊车与远程挪车中的自动档位切换
- 启停系统的自动 P 档/D 档切换
- 典型响应时间：< 200 ms

### 4.2 EPB（电子驻车制动）

EPB 与 Auto Hold 的联动是坡道起步控制的关键：

```
车辆停止（速度 = 0，驾驶员松制动踏板）
    │ Auto Hold 激活（保持制动压力）
    ↓
驾驶员踩油门（扭矩请求 > 0）
    │
    ├─ 平路：扭矩达到 100 Nm 阈值后释放
    └─ 坡道：根据坡度估计值计算所需最小扭矩
             扭矩超过阈值 + 200 ms 延时后释放
             防止后溜 > 5 cm
```

---

## 5. 执行器接口规范

建议线控执行层统一以下接口，避免各系统耦合：

### 5.1 控制指令接口

```
来自上层规划/控制的指令帧（CAN FD，10 ms 周期）：

┌────────────────────────────────────────────────────┐
│ target_steering_angle  : float32  [rad]           │
│ target_acceleration    : float32  [m/s²]          │
│ gear_cmd               : enum     {P, R, N, D}    │
│ parking_brake_cmd      : bool                     │
│ emergency_stop         : bool                     │
│ control_mode           : enum     {AUTO, MANUAL}  │
│ counter                : uint8    (防重放)        │
│ checksum               : uint16   (CRC16)         │
└────────────────────────────────────────────────────┘
```

### 5.2 状态反馈接口

```
来自底盘 ECU 的状态反馈帧（10 ms 周期）：

┌────────────────────────────────────────────────────┐
│ actual_steering_angle  : float32  [rad]           │
│ actual_speed           : float32  [m/s]           │
│ actual_acceleration    : float32  [m/s²]          │
│ actuator_state         : enum     {NORMAL, DEGRADED, FAULT} │
│ fault_code             : uint32   (故障码)        │
│ degrade_level          : uint8    (降级等级 0–3) │
│ counter                : uint8                    │
│ checksum               : uint16                   │
└────────────────────────────────────────────────────┘
```

### 5.3 安全约束

| 约束项 | 说明 |
| --- | --- |
| 指令限幅 | 最大转角 ±45°，最大加速度 ±8 m/s² |
| 变化率限制 | 转角变化率 < 300°/s，jerk < 10 m/s³ |
| 超时处理 | 连续 3 帧无指令 → 输出安全默认值（保向/减速）|
| 失效安全 | 任何传感器故障 → 触发故障码并上报 |
